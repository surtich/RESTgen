/**___ DO NOT MODIFY. AUTOMATICALLY GENERATED BY HERO-I/O DOCS.*/

iris.resource(
	function(self){
		var loaded = false;
		var editable = false;
		var apis = null;
		var schemas = null;

		self.init = function(f_ok) {
			if (loaded) {
				f_ok();
			} else {
				setApis(function() {
					setSchemas(function(){
						if (!apis) {
							apis = {}
						}
						if (!schemas) {
							schemas = {};
						}
						if (!schemas.api) {
							schemas.api = {};
						}
						f_ok();
					});
				});	
			}
		}

		
		self.isEditable = function() {
			return editable;
		};

		self.setEditable = function(edit) {
			editable = edit;
			iris.notify(iris.evts.changeState)
		};

		self.getApis = function(f_ok) {
			self.init(function() {
				f_ok(apis);
			});
		}


		self.getSchemas = function(f_ok) {
			self.init(function() {
				f_ok(schemas);
			});
		}		

		function getJSON(file, f_ok) {
			self.get(file, function(data) {
					loaded = true;
					f_ok(data);
				}, function() {
					loaded = true;
					f_ok(null);
				}	
			);
		}

		function setApis(f_ok) {
			getJSON("/json/apiconfig.json", function(data) {
				apis = data;
				f_ok();
			});
		}

		function setSchemas(f_ok) {
			getJSON("/json/schemas.json", function(data) {
				schemas = data;
				f_ok();
			});
		}


		
	},
iris.path.resource.app);